#!name=自用模块
#!desc=知乎去广告+优化 https://raw.githubusercontent.com/adntian/sync/main/sur/module/custom.sgmodule

[Script]
# 知乎
知乎_处理用户信息 = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/people\/,script-path=https://gist.githubusercontent.com/blackmatrix7/2e550ebf28ca60d620654e394ec47e0b/raw/zhihu.js
知乎_信息流去广告 = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/(moments|topstory)(\/|\?)?(recommend|action=|feed_type=)(?!\/people),script-path=https://gist.githubusercontent.com/blackmatrix7/2e550ebf28ca60d620654e394ec47e0b/raw/zhihu.js
知乎_获取黑名单 = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/settings\/blocked_users,script-path=https://gist.githubusercontent.com/blackmatrix7/2e550ebf28ca60d620654e394ec47e0b/raw/zhihu.js
知乎_官方消息去广告 = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/notifications\/v3\/(message|timeline\/entry\/system_message),script-path=https://gist.githubusercontent.com/blackmatrix7/2e550ebf28ca60d620654e394ec47e0b/raw/zhihu.js
知乎_预置关键词去广告 = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/search\/preset_words\?,script-path=https://gist.githubusercontent.com/blackmatrix7/2e550ebf28ca60d620654e394ec47e0b/raw/zhihu.js
知乎_回答列表去广告 = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/v4\/questions,script-path=https://gist.githubusercontent.com/blackmatrix7/2e550ebf28ca60d620654e394ec47e0b/raw/zhihu.js
知乎_回答内容优化 = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/www\.zhihu\.com\/appview\/v2\/answer\/.*(entry=(?!(preload-topstory|preload-search|preload-subscription)))?,script-path=https://gist.githubusercontent.com/blackmatrix7/2e550ebf28ca60d620654e394ec47e0b/raw/zhihu.js
知乎_优化软件配置 = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/appcloud2\.zhihu\.com\/v\d+\/config,script-path=https://gist.githubusercontent.com/blackmatrix7/2e550ebf28ca60d620654e394ec47e0b/raw/zhihu.js
知乎_热搜去广告 = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/search\/top_search\/tabs\/hot\/items,script-path=https://gist.githubusercontent.com/blackmatrix7/2e550ebf28ca60d620654e394ec47e0b/raw/zhihu.js
知乎_热榜去广告 = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/topstory\/hot-lists?(\?|\/),script-path=https://gist.githubusercontent.com/blackmatrix7/2e550ebf28ca60d620654e394ec47e0b/raw/zhihu.js
知乎_评论去广告 = type=http-response,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/(comment_v5\/)?(answers|comments?|articles|pins)\/\d+\/(root_|child_)?comments?,script-path=https://gist.githubusercontent.com/blackmatrix7/2e550ebf28ca60d620654e394ec47e0b/raw/zhihu.js
知乎_解锁关键词屏蔽 = type=http-request,requires-body=1,max-size=0,pattern=^https?:\/\/api\.zhihu\.com\/feed-root\/block,script-path=https://gist.githubusercontent.com/blackmatrix7/2e550ebf28ca60d620654e394ec47e0b/raw/zhihu.js


[URL Rewrite]
# --------------
# 知乎
# 屏蔽知乎下发的配置，如皮肤等
^https?:\/\/api\.zhihu\.com\/ab\/api\/v1\/products\/zhihu\/platforms\/ios\/config - REJECT
# 屏蔽知乎“我的”页面推荐开通会员的卡片
^https?:\/\/api\.zhihu\.com\/people\/self\/new_user_card - REJECT

[Map Local]
# 知乎
# --------------
# 知乎去除Tab页关注人头像
^https?:\/\/api\.zhihu\.com\/moments\/tab_v2 data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# 知乎去除最常访问
^https?:\/\/api\.zhihu\.com\/moments\/recent data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# 知乎其他广告拦截
^https?:\/\/api\.zhihu\.com\/(notifications\/v\d\/count|v\d\/package|me\/guides|drama\/living-info|ad|fringe|commercial|market\/popovers|.*featured-comment-ad) data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# 屏蔽消息页面上拉的用户精选
^https?:\/\/api\.zhihu\.com/moments/hybrid\? data="https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/blank/blank_dict.json"
# --------------

[Rule]
# --------------
# 知乎
# 知乎广告拦截
RULE-SET,https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/script/zhihu/zhihu_remove_ads.list,REJECT

[MITM]	
hostname = %APPEND% www.zhihu.com, api.zhihu.com, zhuanlan.zhihu.com, appcloud2.zhihu.com
skip-server-cert-verify = true
tcp-connection = true
h2 = true
ca-passphrase = 88476CD7
ca-p12 = MIIKPAIBAzCCCgYGCSqGSIb3DQEHAaCCCfcEggnzMIIJ7zCCBF8GCSqGSIb3DQEHBqCCBFAwggRMAgEAMIIERQYJKoZIhvcNAQcBMBwGCiqGSIb3DQEMAQYwDgQIW5gzDzLi7tcCAggAgIIEGFxIlJplostzD9g77f2P0Wu+Vu++nzLY0po0cuIIUffAaWiDIyieghMNAxyGXoeDjR7K/9SfUGY4UhqJtq3uJbySgu8uTdHYf+tMJcQ3B0u/9gORScunRQluJW2z9DFkp7/s4LZkcQGAlXMB/8+ClPIHw7AUWhMD+8c7REopDDG1sw0i7QfWdHnJA2ebafwQz3IBK/wmf41ViBj7Hfk7AcXHDVQShyx+LKWYgZahGLlbCHuoG1GiYw9TRVxfZ/nHo1zM8fSYRoqOZJHXeoD/+JbwNIxH/pRSiEnS0qS47RRQnwcnQrFAjfcO3dFdC+9+StiHHOD8VmOXpnk249/aK3GXCMUXQpBiSrOePCDVjESgLraek1WPZjSe+8RKWn94KPkHH5VnDU0bWSWh8A+GzBZEpFX5upJHlpPcDFEd7A3n2VIaOks9Mgwe09hRo0vincmT0xiaxRgs9yfgeRyW+HxuG2XPh3iKS7P/bFSqKRnCo2DZJXW2vJ1GHoFSr776qE8d2riWtgJFCJuuJangIQVyGKo2kZAu6vXcNuLOJNVo6ORjxziXg877YNHz5I0meLfuf8roKAcJp09NHj33ty0edVgE9eQ1BoZn0XvwzLVBrmnBFxAb7aymMgej0Ycxpu42yzUF7W9C/MDHus4W98UTWnh/Kz6TTB6wI1GH6aUHex21SQJsZz5mBP9IGPwiR/dXY1Avhvum2Zx3TN4GoJSEITfjMGwHe5ZKHy8c0i6q+Auno3q5u21JyxPxJ5lAdc42jNG4YynSRxYDqmlDdXghBf3ayC2FIULdeNZxoEmyRbOsg7NXfSPLNlCh/qLZ6JyYOKOAI40ljFecJPLANl8U7U5iQz4cSXI+bKtcXMZrsO6p8bBG07uXyXr8UUyUjlFLs9OBNxhVYF7VCo6+KKFehgxkse05UndQebo2sYYU4K4v2h3v646LOZ/f4lMzTdMC4f1RI0VosdYG6RpZKHDn6cTawNKM09P2R5vs33eJCNwq+bE90hvLpHExQZQjmdvRG5xicNRDbgwptB3pdGhraKHcbIXftQM2O2X111It5gc+zJ7DFfRSrik81JwkDrM6mYA3svPywbhmFG5CSsLyUa/nLVZNbocu84Urn41OKOqvL3pC9Ew5KNiqnZSc/HdH3GVN7AwlnsaGGiDfvEAiaH9X5wft4xlNPp4vyNusOG9Kh6zwWwhHKKCIabxsVZD+sKSJcEJOGmBjcW+oYJrwiTlEeXUzUgXhvqSYKJYEnaIUZwQcM2c7al+SVN9DQ2Q+rokBaXcWL8AsulWdfZRlMphB3ijV8ySZ/wJIYxkY1HwmDX8CSvcCcotnZFRqRPQThzb9Jxx20xgWCefOdETLvYAqDJwdROzL0ccwL6SibVFUlv5zLZcwggWIBgkqhkiG9w0BBwGgggV5BIIFdTCCBXEwggVtBgsqhkiG9w0BDAoBAqCCBO4wggTqMBwGCiqGSIb3DQEMAQMwDgQIrrXgbqOY8HACAggABIIEyAIII+9XSuAQakCFlerJBWpSbAoWAddurIA5iCU+kqEnvoR9eFG+bnM2lcjjdIpUJOCD6sYKtG03Mdul33BtI5qpX6JCzO5nCxR/3GxmOyV3ix9BXIDTIt9IcAnrN6NGXYpKuoITHzHsRDm8K0/9ktn7SjHsiJfnf7KJsDvqCd3bKP7VntshaYpMoVz0Ftv3sZqq2/rlzEix9pFpU3YlUpq7CZjejsflP5fjWzZ/QvKiC5zAbuAlHFYKUlOBpvcSS6q3YZYoI7EHM3l1vtrX6135Xqj+rhz9y5Ou6GD0+vme4GvRzrrkqsjpWqlEvXhNHz+t11PY6NQH7CsK5HR6gcJ1PJiPYB2Gw0G5KR3EZG1AhiugXB1NTMul2lZmoCK4/q7qUXDT6s9yaC8jJ96f9psIBfpuHD2G9nD5hQRVulMY7/Ccu06IwmWJSX/9UqGxh8kB4T+CW7RdDlUrqrO4OOL+SCPmTxe+F41xQ/TXv49qWxCLAARfEJiYjG39gEukA0rQqh2HMv83oJbYSH0+87lS71YCRRAGzppm/5ea92IzQKa1YyBi3kh7befb4d6Ueqp/iCxhZkFVANYzoV1QB3zBz8AxLiJFfcSRMgmu8vbqh/w92AbMCIcg9ml2UhDDsDbeOwoJUyKRQRn8Q3KlG3lqyen2kj2AINgUSOSi/NDvvYeCxsFY89D/JvDXRHPMgzSXgl5NW9tA7NIcljPC2nHqazYM37bcPdO6TelUTn8szE6ka4AX4H4gZnV9+47d8yUXFbObA/HmhlzYO2w7QCKnrbClwT6fhYxK9m5mWeJh6XA4hfTnOgq/i8PkpqOJOrhrAPlfunV9tFIQvvT7mR7jT2o4SyVx276zg1GZ+8OcDgOxJ2BIBbdEbXxNn3hRTHGMr4iGScrPr8HMd0bLDcaRWV4dbzJJgSYWhpNPrFunoIXuNHdbZLvAB5Yr1FIadj1pVZF1qM11H8rVofdXytRX8e6c+U8G/BQiX1heY/WCsPsUC5ZsgvYGBYRtPiYqptfJxha8zA7LBoc2mUT0kyX1A3NDeS4gwxccxuKTItViUzfHxh0XJx1CKRoJxzps/Y3Gi93VmDQTCgE5IiBl3H7ZtvF8R8Mko3U7IwCcqSgdTVIemyds3XRBJIy4Kj6I7pWeZEbNkd9fPa9qNDtkXtg/Q9BeuZ4xFFUezP3jX8d4loXJoS7aXB8bSktBJaow55guaqUD+HKSFo4TNI9ZTyW8tgaiWrTiSURDjrJNOhXIGiAiCgiXwVy87a9ZbJvQwsD67J6wQrwcR/HExq5ZYl8KS7ydZahr1rWLJUQWu07LpeuhH25MnmG1cXWCQ+6Sns5h0ocOqsOfoNuQKh0oT5A7Pak3IFMP+/x71Q5VehJZNNnu2YKrKFvZUwhq3ckeoR3pTLE9Y9PoHAxivqgbmLxqFNGLDJ7GqcjjxDvgYfaoA4WMWMRZ1+BVamYw9AFEb5WGZQNCddWrdyy4IdKC4GTTDTcAOeiUn1+jzv3B/vahrP9O6FU3Hvuuqoq5E1/b7EdfuLx+fPz5zw2ayTXGt/C37YtUflr9kL/PBqyaeK6DMZaIqsFiQh138loQD85rlMdcOuk4SpIwUYOk4N5DuvGn05dTxDLTZDFsMCMGCSqGSIb3DQEJFTEWBBQpoVvro5Wiu8guawZ+F2IfAfkK2jBFBgkqhkiG9w0BCRQxOB42AFMAdQByAGcAZQAgAEcAZQBuAGUAcgBhAHQAZQBkACAAQwBBACAAOAA4ADQANwA2AEMARAA3MC0wITAJBgUrDgMCGgUABBQe++5LDfP66nuGKFWtBZonEKZtOQQIkCkVeY7rxWk=
